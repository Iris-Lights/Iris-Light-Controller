\hypertarget{storage_8h}{}\doxysection{src/storage.h File Reference}
\label{storage_8h}\index{src/storage.h@{src/storage.h}}


This is what is used to communicate with the internal filesystem.  


{\ttfamily \#include \char`\"{}globals.\+h\char`\"{}}\newline
Include dependency graph for storage.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{storage_8h_a4cbb6ca7ea559899756b07cc428f1393}{Filesystem\+::launch}} ()
\begin{DoxyCompactList}\small\item\em This starts the file system for reading and writing. If there was an error, this will return false. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a667089b5e3be44df7eb29fd9ed304ffc}{Filesystem\+::is\+\_\+mounted}} ()
\begin{DoxyCompactList}\small\item\em Check if the FS has properly mounted. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a10d66fc7e4559dc3271747a0ca07c929}{Filesystem\+::format\+\_\+filesystem}} ()
\begin{DoxyCompactList}\small\item\em Formats the filesystem. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{storage_8h_a0531f383ccd2203c3f47a08610dbe874}{Filesystem\+::get\+\_\+data}} (char $\ast$key)
\begin{DoxyCompactList}\small\item\em Return datum from the file system. This takes the key of the data and it returns the datum stored with that key value in the filesystem. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a73d94a6dcfb37115c11a06237789cd19}{Filesystem\+::store\+\_\+data}} (char $\ast$key, char $\ast$data, bool strict=false)
\begin{DoxyCompactList}\small\item\em Stores a peice of data in the file system of the device. If strict is set to true, then this function will not allow you to overwrite data is there is already data stored with that key value. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{storage_8h_a2c052e91ceb1ca46896ab57f54a987a3}{Filesystem\+::get\+\_\+encrypted\+\_\+data}} (char $\ast$key, uint8\+\_\+t $\ast$secret\+\_\+key)
\begin{DoxyCompactList}\small\item\em Get encrypted datum from the file system. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a0294aee7deffde875905e6e3311aa0f8}{Filesystem\+::store\+\_\+encrypted\+\_\+data}} (char $\ast$key, char $\ast$data, bool strict=false, uint8\+\_\+t $\ast$secret\+\_\+key=0x0)
\begin{DoxyCompactList}\small\item\em 
\begin{DoxyItemize}
\item Store data to the filesystem that is encrypted with the secret key. 
\end{DoxyItemize}\end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a098729bef22dcfe5e90cd25a55bf091e}{Filesystem\+::create\+\_\+file}} (char $\ast$filename, bool strict=false)
\begin{DoxyCompactList}\small\item\em Create a file in the spiffs filesystem. If strict is true and file exists, return false. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a21a79d1be31d1749277f70528eaf8286}{Filesystem\+::file\+\_\+exists}} (char $\ast$filename)
\begin{DoxyCompactList}\small\item\em Check if a given filename exists in the filesystem. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{storage_8h_a3a6eda0ed4a2d77f8b3899997287e016}{Filesystem\+::delete\+\_\+file}} (char $\ast$filename, bool strict=false)
\begin{DoxyCompactList}\small\item\em Delete a file in the filesystem. If strict is true and file is not present, return false. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{storage_8h_ad0c53a3526978b038e419bf10873b65b}\label{storage_8h_ad0c53a3526978b038e419bf10873b65b}} 
bool {\bfseries Filesystem\+::launch\+\_\+success} = false
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is what is used to communicate with the internal filesystem. 

\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2021-\/06-\/15
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2021 
\end{DoxyCopyright}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{storage_8h_a098729bef22dcfe5e90cd25a55bf091e}\label{storage_8h_a098729bef22dcfe5e90cd25a55bf091e}} 
\index{storage.h@{storage.h}!create\_file@{create\_file}}
\index{create\_file@{create\_file}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{create\_file()}{create\_file()}}
{\footnotesize\ttfamily bool Filesystem\+::create\+\_\+file (\begin{DoxyParamCaption}\item[{char $\ast$}]{filename,  }\item[{bool}]{strict = {\ttfamily false} }\end{DoxyParamCaption})}



Create a file in the spiffs filesystem. If strict is true and file exists, return false. 


\begin{DoxyParams}{Parameters}
{\em filename} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a3a6eda0ed4a2d77f8b3899997287e016}\label{storage_8h_a3a6eda0ed4a2d77f8b3899997287e016}} 
\index{storage.h@{storage.h}!delete\_file@{delete\_file}}
\index{delete\_file@{delete\_file}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{delete\_file()}{delete\_file()}}
{\footnotesize\ttfamily bool Filesystem\+::delete\+\_\+file (\begin{DoxyParamCaption}\item[{char $\ast$}]{filename,  }\item[{bool}]{strict = {\ttfamily false} }\end{DoxyParamCaption})}



Delete a file in the filesystem. If strict is true and file is not present, return false. 


\begin{DoxyParams}{Parameters}
{\em filename} & \\
\hline
{\em strict} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a21a79d1be31d1749277f70528eaf8286}\label{storage_8h_a21a79d1be31d1749277f70528eaf8286}} 
\index{storage.h@{storage.h}!file\_exists@{file\_exists}}
\index{file\_exists@{file\_exists}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{file\_exists()}{file\_exists()}}
{\footnotesize\ttfamily bool Filesystem\+::file\+\_\+exists (\begin{DoxyParamCaption}\item[{char $\ast$}]{filename }\end{DoxyParamCaption})}



Check if a given filename exists in the filesystem. 


\begin{DoxyParams}{Parameters}
{\em filename} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a10d66fc7e4559dc3271747a0ca07c929}\label{storage_8h_a10d66fc7e4559dc3271747a0ca07c929}} 
\index{storage.h@{storage.h}!format\_filesystem@{format\_filesystem}}
\index{format\_filesystem@{format\_filesystem}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{format\_filesystem()}{format\_filesystem()}}
{\footnotesize\ttfamily bool Filesystem\+::format\+\_\+filesystem (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Formats the filesystem. 

\begin{DoxyNote}{Note}
Data is not recoverable if this function is called.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a0531f383ccd2203c3f47a08610dbe874}\label{storage_8h_a0531f383ccd2203c3f47a08610dbe874}} 
\index{storage.h@{storage.h}!get\_data@{get\_data}}
\index{get\_data@{get\_data}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{get\_data()}{get\_data()}}
{\footnotesize\ttfamily char $\ast$ Filesystem\+::get\+\_\+data (\begin{DoxyParamCaption}\item[{char $\ast$}]{key }\end{DoxyParamCaption})}



Return datum from the file system. This takes the key of the data and it returns the datum stored with that key value in the filesystem. 

\begin{DoxyNote}{Note}
This returns dynamically allocated memory. The file data must be deleted.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em key} & -\/ The key of the data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$ 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a2c052e91ceb1ca46896ab57f54a987a3}\label{storage_8h_a2c052e91ceb1ca46896ab57f54a987a3}} 
\index{storage.h@{storage.h}!get\_encrypted\_data@{get\_encrypted\_data}}
\index{get\_encrypted\_data@{get\_encrypted\_data}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{get\_encrypted\_data()}{get\_encrypted\_data()}}
{\footnotesize\ttfamily char $\ast$ Filesystem\+::get\+\_\+encrypted\+\_\+data (\begin{DoxyParamCaption}\item[{char $\ast$}]{key,  }\item[{uint8\+\_\+t $\ast$}]{secret\+\_\+key }\end{DoxyParamCaption})}



Get encrypted datum from the file system. 

\begin{DoxyNote}{Note}
This returns dynamically allocated memory. The file data must be deleted.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em key} & \\
\hline
{\em secret\+\_\+key} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$ 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a667089b5e3be44df7eb29fd9ed304ffc}\label{storage_8h_a667089b5e3be44df7eb29fd9ed304ffc}} 
\index{storage.h@{storage.h}!is\_mounted@{is\_mounted}}
\index{is\_mounted@{is\_mounted}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{is\_mounted()}{is\_mounted()}}
{\footnotesize\ttfamily bool Filesystem\+::is\+\_\+mounted (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check if the FS has properly mounted. 

\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a4cbb6ca7ea559899756b07cc428f1393}\label{storage_8h_a4cbb6ca7ea559899756b07cc428f1393}} 
\index{storage.h@{storage.h}!launch@{launch}}
\index{launch@{launch}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{launch()}{launch()}}
{\footnotesize\ttfamily bool Filesystem\+::launch (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This starts the file system for reading and writing. If there was an error, this will return false. 

\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a73d94a6dcfb37115c11a06237789cd19}\label{storage_8h_a73d94a6dcfb37115c11a06237789cd19}} 
\index{storage.h@{storage.h}!store\_data@{store\_data}}
\index{store\_data@{store\_data}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{store\_data()}{store\_data()}}
{\footnotesize\ttfamily bool Filesystem\+::store\+\_\+data (\begin{DoxyParamCaption}\item[{char $\ast$}]{key,  }\item[{char $\ast$}]{data,  }\item[{bool}]{strict = {\ttfamily false} }\end{DoxyParamCaption})}



Stores a peice of data in the file system of the device. If strict is set to true, then this function will not allow you to overwrite data is there is already data stored with that key value. 


\begin{DoxyParams}{Parameters}
{\em key} & -\/ the key of the key data pair \\
\hline
{\em data} & -\/ the data of the key data pair \\
\hline
{\em strict} & -\/ allow overwrite of existing data? \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true -\/ on successful write 

false -\/ on failure 
\end{DoxyReturn}
\mbox{\Hypertarget{storage_8h_a0294aee7deffde875905e6e3311aa0f8}\label{storage_8h_a0294aee7deffde875905e6e3311aa0f8}} 
\index{storage.h@{storage.h}!store\_encrypted\_data@{store\_encrypted\_data}}
\index{store\_encrypted\_data@{store\_encrypted\_data}!storage.h@{storage.h}}
\doxysubsubsection{\texorpdfstring{store\_encrypted\_data()}{store\_encrypted\_data()}}
{\footnotesize\ttfamily bool Filesystem\+::store\+\_\+encrypted\+\_\+data (\begin{DoxyParamCaption}\item[{char $\ast$}]{key,  }\item[{char $\ast$}]{data,  }\item[{bool}]{strict = {\ttfamily false},  }\item[{uint8\+\_\+t $\ast$}]{secret\+\_\+key = {\ttfamily 0x0} }\end{DoxyParamCaption})}




\begin{DoxyItemize}
\item Store data to the filesystem that is encrypted with the secret key. 
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em key} & \\
\hline
{\em data} & \\
\hline
{\em strict} & \\
\hline
{\em secret\+\_\+key} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true 

false 
\end{DoxyReturn}
